global:
  # Обязательные базовые настройки
  application:
    create: true
    name: gitlab
  
  common:
    labels: {}
  
  service:
    labels: {}
    annotations: {}
  
  workhorse:
    tls:
      enabled: false 
  
  image:
    tagSuffix: ""
  
  serviceAccount:
    enabled: true
    create: true
  
  initialRootPassword:
    secret: gitlab-initial-root-password
    key: password
  
  hosts:
    domain: k8s.djabjo.ru
    externalIP: ""
    https: true
    
    gitlab:
      name: gitlab.k8s.djabjo.ru
      https: true
    
    registry:
      name: registry.k8s.djabjo.ru
      https: true
    
    ingress:
      configureCertmanager: true
      class: nginx
      tls:
        enabled: true
        secretName: gitlab-tls

  ingress:
    enabled: true
    configureCertmanager: true
    tls:
      enabled: true
      secretName: gitlab-tls
    annotations:
      kubernetes.io/ingress.class: nginx
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: "0"

certmanager:
  install: false

nginx-ingress:
  enabled: false

gitlab:
  webservice:
    enabled: true
    replicaCount: 1
    ingress:
      enabled: true
      path: /
      pathType: Prefix
      tls:
        enabled: true
        secretName: gitlab-tls
      annotations:
        nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    resources:
      requests:
        memory: 2Gi
        cpu: 500m
      limits:
        memory: 3Gi
        cpu: 1

  sidekiq:
    enabled: true
    replicaCount: 1
    resources:
      requests:
        memory: 1Gi
        cpu: 300m
      limits:
        memory: 2Gi
        cpu: 500m

  toolbox:
    enabled: true
    persistence:
      enabled: false

  gitaly:
    enabled: true
    persistence:
      enabled: true
      size: 10Gi

  gitlab-shell:
    enabled: true
    replicaCount: 1

  registry:
    enabled: true
    ingress:
      enabled: true
      host: registry.k8s.djabjo.ru
    resources:
      requests:
        memory: 1Gi
        cpu: 200m
      limits:
        memory: 2Gi
        cpu: 500m
    storage:
      secret: registry-storage
      extraKey: config
      backend: filesystem
    persistence:
      enabled: true
      size: 50Gi

postgresql:
  enabled: true
  persistence:
    enabled: true
    size: 10Gi
  resources:
    requests:
      memory: 1Gi
      cpu: 500m

redis:
  enabled: true
  master:
    persistence:
      enabled: true
      size: 5Gi
  resources:
    requests:
      memory: 1Gi
      cpu: 500m

prometheus:
  install: false

alertmanager:
  enabled: false

grafana:
  enabled: false

gitlab-runner:
  enabled: false

minio:
  enabled: false

mattermost:
  enabled: false

pages:
  enabled: false